# üß© Tema 1: Nodos en LangGraph

## ¬øQu√© es un Nodo?  
En LangGraph, los **nodos** representan las operaciones fundamentales que se realizan en un flujo de trabajo. Cada nodo se encarga de procesar datos o estados, y a partir de esto, devolver un nuevo estado o resultado.  
Piensa en los nodos como **piezas individuales de una m√°quina** que trabajan juntas para completar una tarea compleja.  

Los nodos est√°n conectados mediante **aristas (edges)** que permiten el flujo de informaci√≥n entre ellos, formando un grafo que ejecuta operaciones de manera secuencial o condicional.  

---

## üõ†Ô∏è ¬øC√≥mo Funciona un Nodo?  
- Un nodo es una **funci√≥n** que toma un estado de entrada y devuelve un nuevo estado.  
- Los nodos pueden representar tareas simples (como sumar n√∫meros) o procesos m√°s complejos (como ejecutar un modelo de IA).  
- Cada nodo tiene una conexi√≥n hacia otros nodos, permitiendo que el flujo contin√∫e seg√∫n la l√≥gica definida.  

---

## üöÄ Ejemplo: Construyendo un Grafo con Nodos  

Para entender mejor c√≥mo funcionan los nodos, vamos a construir un grafo simple utilizando **LangGraph**.  

El objetivo ser√° simular un grafo que cambia de estado y elige diferentes caminos en funci√≥n de decisiones aleatorias.  

---

### 1. Instalaci√≥n de LangGraph  
Primero, asegur√©monos de tener instalada la librer√≠a LangGraph.  
```phyton
%pip install --quiet -U langgraph
``` 

---

### 2. Definiendo el Estado del Grafo  
El estado del grafo es una estructura que guarda informaci√≥n sobre el progreso y los datos en cada paso.  
Aqu√≠ definimos una clase `State` que representa el estado del grafo con una variable `graph_state` de tipo texto.  
```phyton
%pip install --quiet -U langgraph
``` 

---

### 3. Creando los Nodos  

Ahora crearemos tres nodos simples:  
1. **Nodo 1**: Modifica el estado inicial agregando "I am".  
2. **Nodo 2**: A√±ade "happy!" al estado.  
3. **Nodo 3**: A√±ade "sad!" al estado.  

Cada nodo es una funci√≥n que recibe el estado actual (`state`) y devuelve un nuevo estado modificado.  
[codigo3]  

---

### 4. Agregando L√≥gica de Decisi√≥n  

Aqu√≠ agregamos una funci√≥n `decide_mood` que **decide aleatoriamente** si el flujo contin√∫a hacia el **Nodo 2 (feliz)** o el **Nodo 3 (triste)**.  
Esto simula una bifurcaci√≥n en el camino que depender√° del resultado de una probabilidad del 50%.  
[codigo4]  

---

### 5. Construcci√≥n del Grafo  

En este paso, construimos el grafo utilizando `StateGraph`.  
Vamos a explicar l√≠nea por l√≠nea:  

[codigo5]  

1. **`StateGraph(State)`**:  
   - Creamos una instancia de `StateGraph` y le pasamos el estado que definimos antes (`State`).  
   - **¬øPor qu√© lo hacemos?**: LangGraph necesita saber qu√© tipo de estado manejar√° el grafo.   

2. **`builder.add_node("node_1", node_1)`**:  
   - A√±adimos el **Nodo 1** al grafo.  
   - El primer par√°metro `"node_1"` es el identificador del nodo, y el segundo (`node_1`) es la funci√≥n que ejecutar√°.  

3. **`builder.add_node("node_2", node_2)`**:  
   - Agregamos el **Nodo 2**. Funciona de la misma forma que el Nodo 1.  

4. **`builder.add_node("node_3", node_3)`**:  
   - Agregamos el **Nodo 3** al grafo.  

5. **`builder.add_edge(START, "node_1")`**:  
   - Conectamos el punto de inicio (`START`) con el **Nodo 1**.  
   - Esto significa que cuando el grafo comience, lo har√° en el Nodo 1.  

6. **`builder.add_conditional_edges("node_1", decide_mood)`**:  
   - Desde el **Nodo 1**, agregamos una bifurcaci√≥n condicional que ejecutar√° la funci√≥n `decide_mood`.  
   - Dependiendo del resultado, el flujo se dirigir√° hacia el **Nodo 2 o 3**.  

7. **`builder.add_edge("node_2", END)`**:  
   - Si el flujo llega al Nodo 2, este finalizar√° (`END`).  

8. **`builder.add_edge("node_3", END)`**:  
   - De igual forma, si pasa por el Nodo 3, tambi√©n finalizar√°.  

Finalmente, compilamos el grafo:  
- **`graph = builder.compile()`**: Ensambla el grafo con todos los nodos y conexiones.  

---

### 6. Visualizaci√≥n del Grafo  

Para visualizar el grafo, usamos la funci√≥n `draw_mermaid_png()` que genera un diagrama del grafo.  
Esto nos permite ver gr√°ficamente c√≥mo est√°n conectados los nodos.  
[codigo6]  

---

## üß© ¬øQu√© Hemos Aprendido?  
- **Nodos**: Son funciones que procesan datos y modifican el estado de un grafo.  
- **Decisiones Condicionales**: Podemos agregar l√≥gica de bifurcaci√≥n para que el flujo tome diferentes caminos.  
- **StateGraph**: Es la base sobre la que construimos el grafo, a√±adiendo nodos y conexiones.  
- **Visualizaci√≥n**: LangGraph permite visualizar gr√°ficamente el flujo de trabajo.  

---

## üåê Siguientes Pasos  
En el siguiente tema aprenderemos sobre **Edges (Conexiones)**, que permiten conectar nodos y controlar el flujo de informaci√≥n entre ellos.  
