# üß© Tema 3: State Schema y Memoria  

## üöÄ ¬øQu√© es el State Schema y la Memoria en LangGraph?  

El **State Schema** es una parte fundamental de LangGraph que nos permite definir y gestionar el estado del grafo mientras se ejecuta.  
El estado es la informaci√≥n que se **mantiene, actualiza y transfiere** a medida que el flujo pasa por diferentes nodos.  

La memoria nos permite:  
- **Persistencia de datos** a lo largo del flujo.  
- **Decisiones basadas en el estado actual**.  
- **Mayor control** sobre c√≥mo se modifica la informaci√≥n.  

Piensa en el estado como una mochila que lleva informaci√≥n de un nodo a otro, y en cada nodo puedes **a√±adir, modificar o eliminar** elementos dentro de esa mochila.  

---

## üõ†Ô∏è Ejemplo Pr√°ctico: Implementando State Schema y Memoria  

A continuaci√≥n, construiremos un ejemplo simple que muestra c√≥mo definir un `State Schema` y c√≥mo los nodos modifican el estado paso a paso.  

### üìã Definici√≥n del State Schema  
Primero, creamos una estructura b√°sica para nuestro estado utilizando `TypedDict`.  
[codigo1]  

---

### üß© Creaci√≥n de Nodos para Modificar el Estado  
Definimos tres nodos:  
- **Nodo 1**: A√±ade `"Estoy aprendiendo"` al estado.  
- **Nodo 2**: Agrega `" LangGraph!"`.  
- **Nodo 3**: A√±ade `" Python es incre√≠ble!"` en funci√≥n de una decisi√≥n aleatoria.  

Cada nodo toma el estado actual y lo modifica seg√∫n una l√≥gica simple.  
[codigo2]  

---

### üîÑ Decisi√≥n Condicional  
Implementamos una funci√≥n que decide entre el **Nodo 2** o el **Nodo 3**, a√±adiendo una bifurcaci√≥n condicional.  
[codigo3]  

---

### üèóÔ∏è Construcci√≥n del Grafo  
Agregamos los nodos y edges necesarios para construir el grafo, conectando `START` con `node_1`, seguido de una bifurcaci√≥n hacia `node_2` o `node_3`, y terminando en `END`.  
[codigo4]  

---

### üìà Visualizaci√≥n del Grafo  
Para entender mejor la estructura creada, visualizamos el grafo.  
[codigo5]  

---

## üöÄ Invocando el Grafo y Posibles Resultados  

Invocamos el grafo pasando un estado inicial.  

```python
graph.invoke({"graph_state" : "Hola!"})
````

Dependiendo de la bifurcaci√≥n, podemos obtener diferentes resultados:

```phyton title="Resultado 1"
---Node 1---
---Node 3---
{'graph_state': 'Hola, me llamo Raul. Me gusta programar!'}
```
```phyton title="Resultado 2"
---Node 1---
---Node 3---
{'graph_state': 'Hola, me llamo Raul. Me gusta salir en bici!'}
```

## üß© ¬øQu√© Hemos Aprendido?  

- **State Schema:** Son las rutas que conectan nodos en el grafo, permitiendo el flujo de informaci√≥n de un nodo a otro.  
- **Edges Condicionales:** Permiten bifurcaciones en el flujo, tomando decisiones din√°micas que afectan el camino que sigue el grafo.  
- **Flujo de Trabajo Din√°mico:** Al conectar nodos de forma condicional, podemos crear grafos m√°s complejos y adaptativos, generando diferentes resultados seg√∫n la l√≥gica aplicada.  
- **Construcci√≥n de Grafos:** Hemos aprendido a agregar nodos, edges y compilar el grafo usando `StateGraph` y `add_edge`.  

---